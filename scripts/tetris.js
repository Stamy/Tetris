"use strict";!function(t){function i(){this.grid=(new app.Grid).generate(),this.figure=new app.Figure,this.xOffset=9,this.yOffset=0,this.grid.isCollision(this.figure.figure,this.yOffset,this.xOffset)}i.prototype.moveDown=function(){var t=this.grid,i=this.figure.figure;this.yOffset<t.rows-i.length?(++this.yOffset,t.isCollision(i,this.yOffset,this.xOffset)||(--this.yOffset,t.addFigure(i,this.yOffset,this.xOffset),this.newFigure())):(t.addFigure(i,this.yOffset,this.xOffset),this.newFigure())},i.prototype.newFigure=function(){this.figure=new app.Figure,this.yOffset=0,this.xOffset=9,this.grid.isCollision(this.figure.figure,this.yOffset,this.xOffset)},i.prototype.moveLeft=function(){var t=this.grid;this.xOffset>0&&(--this.xOffset,t.isCollision(this.figure.figure,this.yOffset,this.xOffset)?this.moveDown():++this.xOffset)},i.prototype.moveRight=function(){var t=this.grid,i=this.figure.figure;this.xOffset<t.columns-i[0].length&&(++this.xOffset,t.isCollision(i,this.yOffset,this.xOffset)?this.moveDown():--this.xOffset)},i.prototype.rotate=function(t){var i=this.grid,s=this.figure.figure;if(s.length+this.xOffset<=i.columns&&s[0].length+this.yOffset<=i.rows){var e=t();i.isCollision(e,this.yOffset,this.xOffset)&&(this.figure.figure=e,this.moveDown())}},i.prototype.rotateLeft=function(){var t=this;this.rotate(function(){return t.figure.rotateLeft()})},i.prototype.rotateRight=function(){var t=this;this.rotate(function(){return t.figure.rotateRight()})},t.app=t.app||{},t.app.Tetris=i}(window);